<!DOCTYPE html>
<html lang="zh-hant">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>用戶列表</title>
        <!-- link -->
        <link rel="stylesheet" href="./css/index.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">
        <!-- script -->
        <script src="./js/PDExtension.js" copyright="Pardn Ltd" defer></script>
        <!-- inline-style -->
        <style>
            .dom-temp {
                display: none !important;
            }
        </style>
    </head>

    <body id="body" class="no-select">
        <!-- 登入 -->
        <section class="login dom-temp" :if="is_guest">
            <h1>{{ login.title }}</h1>
            <section>
                <label>
                    <input type="password" placeholder="密碼" :model="login.password">
                </label>
                <i class="fa-solid fa-eye-slash" @click="show"></i>
            </section>
            <button @click="login">
                前往
                <i class="fa-solid fa-arrow-right"></i>
            </button>
        </section>
        <!-- 主要 -->
        <section class="dom-temp" :else>
            <nav class="body-top">
                <section>
                    <section class="left">
                        <a href="/">
                            <img src="./image/logo_ffffff.svg" alt="">
                            <strong>{{ title }}</strong>
                        </a>
                    </section>
                    <section class="right">
                        <button class="df" @click="logout">登出</button>
                    </section>
                </section>
            </nav>
            <section>
                <!-- 左側導覽列 -->
                <section class="body-left">
                    <div :for="e in left_tab">
                        <p @click="tab_show">
                            <i :class="e.icon"></i>
                            <span>{{ e.title }}</span>
                            <i class="fa-solid fa-chevron-right"></i>
                        </p>
                        <section :data-row="LENGTH(e.body)">
                            <a :href="a.href" :data-selected="a.is_selected" :for="a in e.body">
                                <i :class="a.icon"></i>
                                <span>{{ a.title }}</span>
                            </a>
                        </section>
                    </div>
                </section>
                <!-- 內容 -->
                <section class="body-right">
                    <!-- 頂部導覽列 -->
                    <nav>
                        <button>
                            <i class="fa-solid fa-bars"></i>
                        </button>
                        <a :href="e.href" :for="e in top_tab">{{ e.title }}</a>
                    </nav>
                    <!-- 表單 -->
                    <section class="body-right-form">
                        <strong>{{ form.title }}</strong>
                        <form action="">
                            <label :for="(key, val) in form.data" :class="val.size">{{ key }}
                                <input :if="val.is_select == false" :type="val.type" :placeholder="val.placeholder" :model="val.value">
                            </label>
                        </form>
                        <section>
                            <button>
                                <i class="fa-solid fa-magnifying-glass"></i>
                                搜尋
                            </button>
                            <button>
                                <i class="fa-solid fa-file-export"></i>
                                匯出
                            </button>
                            <button class="clear">
                                <i class="fa-solid fa-eraser"></i>
                                清除
                            </button>
                        </section>
                    </section>
                    <!-- 資料庫 -->
                    <section class="body-right-database">
                        <section>
                            <!-- 列表 -->
                            <table>
                                <thead>
                                    <tr>
                                        <th :for="e in database.head">{{ e }}</th>
                                        <th>其他</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr :class="e.class" :for="e in database.list">
                                        <td :for="a in e.body" :html="a"></td>
                                        <td>
                                            <button>編輯</button>
                                            <button>通知</button>
                                            <button class="alert" :if="e.is_deleted == false">刪除</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </section>
                        <!-- 按鈕 -->
                        <footer>
                            <section>
                                <a href="" user-select="0">上一頁</a>
                                <a href="" user-select="0">下一頁</a>
                            </section>
                            <section>
                                <p user-select="0">顯示</p>
                                <select name="" id="">
                                    <option value="">10</option>
                                    <option value="">50</option>
                                </select>
                                <p user-select="0">結果</p>
                            </section>
                        </footer>
                    </section>
                </section>
            </section>
        </section>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const page = new $dom({
                    id: "body",
                    data: {
                        is_guest: false,
                        login: {
                            title: "Pardn Chiu",
                            // 用於綁定 ':model'
                            password: "",
                        },
                        title: "管理後台",
                        // 左側導覽列
                        left_tab: [
                            {
                                icon: "fa-solid fa-users",
                                title: "文章管理",
                                body: [
                                    {
                                        is_selected: true,
                                        icon: "fa-solid fa-list-alt",
                                        title: "文章列表",
                                        href: "/articles.html"
                                    },
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-plus-circle",
                                        title: "撰寫文章"
                                    },
                                ]
                            },
                            {
                                icon: "fa-solid fa-box",
                                title: "商品管理",
                                body: [
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-list-alt",
                                        title: "商品列表"
                                    },
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-plus-circle",
                                        title: "新增商品"
                                    },
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-exclamation-triangle",
                                        title: "系統提醒"
                                    },
                                ]
                            },
                            {
                                icon: "fa-solid fa-tv",
                                title: "網站管理",
                                body: [
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-file",
                                        title: "首頁"
                                    },
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-file",
                                        title: "介紹頁"
                                    },
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-file",
                                        title: "聯絡我們"
                                    },
                                ]
                            },
                            {
                                icon: "fa-solid fa-user-shield",
                                title: "系統管理",
                                body: [
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-mail-bulk",
                                        title: "信箱設定"
                                    },
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-unlock-alt",
                                        title: "更改密碼"
                                    },
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-key",
                                        title: "兩步驟驗證"
                                    },
                                ]
                            },
                            {
                                icon: "fa-solid fa-code-branch",
                                title: "版本資訊",
                                body: [
                                    {
                                        is_selected: false,
                                        icon: "fa-brands fa-readme",
                                        title: "Readme"
                                    },
                                    {
                                        is_selected: false,
                                        icon: "fa-solid fa-balance-scale",
                                        title: "License"
                                    },
                                ]
                            },
                        ],
                        // 頂部導覽列
                        top_tab: [
                            {
                                title: "首頁",
                                href: "/",
                            },
                            {
                                title: "文章",
                                href: "",
                            }
                        ],
                        // 篩選
                        form: {
                            title: "篩選文章",
                            data: {
                                sn: {
                                    is_select: false,
                                    type: "text",
                                    size: "_33",
                                    placeholder: "SN",
                                    value: ""
                                },
                                uri: {
                                    is_select: false,
                                    type: "text",
                                    size: "_33",
                                    placeholder: "自訂ID",
                                    value: ""
                                },
                                title: {
                                    is_select: false,
                                    type: "text",
                                    size: "_33",
                                    placeholder: "標題",
                                    value: ""
                                },
                                subtitle: {
                                    is_select: false,
                                    type: "text",
                                    size: "_33",
                                    placeholder: "副標題",
                                    value: ""
                                },
                                description: {
                                    is_select: false,
                                    type: "text",
                                    size: "_33",
                                    placeholder: "內容",
                                    value: ""
                                },
                                tag: {
                                    is_select: false,
                                    type: "text",
                                    size: "_33",
                                    placeholder: "標籤",
                                    value: ""
                                },
                                upload_start: {
                                    is_select: false,
                                    type: "date",
                                    size: "_25",
                                    value: ""
                                },
                                upload_end: {
                                    is_select: false,
                                    type: "date",
                                    size: "_25",
                                    value: ""
                                },
                                update_start: {
                                    is_select: false,
                                    type: "date",
                                    size: "_25",
                                    value: ""
                                },
                                update_end: {
                                    is_select: false,
                                    type: "date",
                                    size: "_25",
                                    value: ""
                                }
                            }
                        },
                        // 資料列表
                        database: {
                            head: ["SN", "自訂ID", "標題", "副標題", "內容", "上傳", "更新", "觀看", "留言"],
                            list: [
                                {
                                    class: "",
                                    is_deleted: false,
                                    body: ["1", "<a href='https://pardn.io/blog/nodejs-install' target='_blank'>nodejs-install</a>", "Node.js: JavaScript 的後端魔法", "Node.js: JavaScript 的後端魔法 (1)", "> 歡迎來到 Node.js，一個開發者的熱門後端語言選擇，這是建構高效伺服器端應用程式的理想平台。", "1天前", "", "30", "1"]
                                },
                                {
                                    class: "",
                                    is_deleted: false,
                                    body: ["2", "<a href='https://pardn.io/blog/nodejs-promise-async' target='_blank'>nodejs-promise-async</a>", "Promise 與 Async/Await 的非同步設計", "Node.js: JavaScript 的後端魔法 (2)", "> 非同步程式設計、事件驅動、Promises 以 及Async/Await 是Node.js強大的支柱。", "1天前", "", "30", "1"]
                                },
                                {
                                    class: "",
                                    is_deleted: false,
                                    body: ["3", "<a href='https://pardn.io/blog/nodejs-hello-world' target='_blank'>nodejs-hello-world</a>", "建立第一個 Node.js 應用程式有多難？", "Node.js: JavaScript 的後端魔法 (3)", "> 我們將帶你踏上 Node.js 的奇妙旅程。透過簡單易懂的步驟，你將學會如何創建一個基本的 HTTP 伺服器，處理請求與回應，以及實作基本的路由設定。", "1天前", "", "30", "1"]
                                },
                                {
                                    class: "",
                                    is_deleted: false,
                                    body: ["4", "<a href='https://pardn.io/blog/nodejs-express' target='_blank'>nodejs-express</a>", "什麼？Express 竟然如此的好用", "Node.js: JavaScript 的後端魔法 (4)", "> Express 是一個快速、靈活且簡潔的 Node.js 框架，專為構建 Web 應用程式和 API 而設計，如路由、模板引擎、中介軟體等。", "1天前", "", "30", "1"]
                                },
                                {
                                    class: "",
                                    is_deleted: false,
                                    body: ["5", "<a href='https://pardn.io/blog/nodejs-mongodb-mysql' target='_blank'>nodejs-mongodb-mysql</a>", "前進資料庫! MongoDB 與 MySQL", "Node.js: JavaScript 的後端魔法 (5)", "> 本篇文章我們將討論兩個主要的資料庫選擇:NoSQL 的 MongoDB 和關聯式資料庫的 MySQL。", "1天前", "", "30", "1"]
                                },
                                {
                                    class: "",
                                    is_deleted: false,
                                    body: ["6", "<a href='https://pardn.io/blog/nodejs-middleware' target='_blank'>nodejs-middleware</a>", "中介軟體 (Middleware) 與定制流程", "Node.js: JavaScript 的後端魔法 (6)", "> 在 Express 中，中介軟體 (Middleware) 是一個強大的功能，它允許我們在請求和回應之間執行功能。", "1天前", "", "30", "1"]
                                },
                                {
                                    class: "",
                                    is_deleted: false,
                                    body: ["7", "<a href='https://pardn.io/blog/nodejs-pug-ejs' target='_blank'>nodejs-pug-ejs</a>", "服務端渲染 (SSR) 的救星！Pug 與 EJS", "Node.js: JavaScript 的後端魔法 (7)", "> 模板引擎是一種強大的工具，允許我們直接從後端動態生成 HTML並傳遞至前端顯示。", "1天前", "", "30", "1"]
                                },
                                {
                                    class: "",
                                    is_deleted: false,
                                    body: ["8", "<a href='https://pardn.io/blog/nodejs-jwt-xss-csp' target='_blank'>nodejs-jwt-xss-csp</a>", "實作 JWT 會員登入以及防範SQL注入與XSS攻擊", "Node.js: JavaScript 的後端魔法 (8)", "> 在現代 Web 開發中，保障使用者身分的安全性是一個至關重要的課題。", "1天前", "", "30", "1"]
                                },
                                {
                                    class: "",
                                    is_deleted: false,
                                    body: ["9", "<a href='https://pardn.io/blog/nodejs-restful-api' target='_blank'>nodejs-restful-api</a>", "RESTful API 該怎麼設計？", "Node.js: JavaScript 的後端魔法 (9)", "> RESTful API 是一種設計風格，旨在促進資源的有效管理和互動。", "1天前", "", "30", "1"]
                                },
                                {
                                    class: "",
                                    is_deleted: false,
                                    body: ["10", "<a href='https://pardn.io/blog/nodejs-mocha-supertest' target='_blank'>nodejs-mocha-supertest</a>", "Mocha？Supertest？單元與整合測試？", "Node.js: JavaScript 的後端魔法 (10)", "> 在軟體開發生命週期中，測試佔據了至關重要的地位，有助於確保代碼的正確性、可靠性和穩定性。", "1天前", "", "30", "1"]
                                },
                                // {
                                //     class: "info",
                                //     is_deleted: false,
                                //     body: ["2", "陳曉華", "B123456789", "0912345678", "mail@pardnltd (尚未驗證)"]
                                // },
                                // {
                                //     class: "hide",
                                //     is_deleted: true,
                                //     body: ["3", "吳忠志", "C123456789", "0912345678", "<a href='mailto:mail@pardnltd'>mail@pardnltd</a>"]
                                // },
                            ]
                        }
                    },
                    event: {
                        init: function () {
                            if ("section.body-left".$) {
                                "section.body-left".$.$childAll.forEach(e => {
                                    e._class("r" + e.$child(-1).$childAll.length)
                                });
                            };
                        },
                        show: function () {
                            const isShow = this.$parent(0).$$class("show");
                            this.__class(`fa-solid ${isShow ? "fa-eye-slash" : "fa-eye"}`);
                            this.$pre(0).$child(0).type = isShow ? "password" : "text";
                            this.$parent(0).$$class_(isShow, "show");
                        },
                        login: function () {
                            page.dom.$child(0)._class("show");

                            setTimeout(() => {
                                page.data.is_guest = false;

                                setTimeout(_ => {
                                    page.event.init();
                                }, 100);
                            }, 1000);
                        },
                        logout: function () {
                            page.data.is_guest = true;
                        },
                        tab_show: function (e) {
                            const parent = this.$parent(0);
                            const is_show = parent.$$class("show") || parent.$sel("a[data-selected='true']");
                            const is_hide = parent.$$class("hide");

                            if (is_hide) {
                                parent._class("show").class_("hide");
                            }
                            else if (is_show) {
                                parent._class("hide").class_("show");
                            }
                            else {
                                parent._class("show");
                            }

                        }
                    },
                    next: () => {
                        page.event.init();
                        // const url = new URL(location.href);

                        // login.data.email = url.searchParams.get("user_email");
                        // history.replaceState(null, null, "/management/login");
                    }
                });
            });
        </script>
    </body>

</html>